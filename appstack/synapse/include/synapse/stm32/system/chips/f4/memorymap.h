#ifndef STM32_MEMORYMAP_H
#define STM32_MEMORYMAP_H

#ifndef STM32_MEMORYMAP
  #define STM32_MEMORYMAP
#else
  #error "Cannot define stm32 memory map twice."
#endif

#define PERIPH_BASE_ADDR (0x40000000u)

#define APB1_ADDR (PERIPH_BASE_ADDR + 0x0)
#define APB2_ADDR (PERIPH_BASE_ADDR + 0x10000)
#define AHB1_ADDR (PERIPH_BASE_ADDR + 0x20000)
#define AHB2_ADDR (PERIPH_BASE_ADDR + 0x10000000)
#define AHB3_ADDR (PERIPH_BASE_ADDR + 0x20000000)

// APB1 peripherals
#define TIM2_ADDR (APB1_ADDR + 0x0)
#define TIM3_ADDR (APB1_ADDR + 0x400)
#define TIM4_ADDR (APB1_ADDR + 0x800)
#define TIM5_ADDR (APB1_ADDR + 0xc00)
#define TIM6_ADDR (APB1_ADDR + 0x1000)
#define TIM7_ADDR (APB1_ADDR + 0x1400)
#define TIM12_ADDR (APB1_ADDR + 0x1800)
#define TIM13_ADDR (APB1_ADDR + 0x1c00)
#define TIM14_ADDR (APB1_ADDR + 0x2000)

#define RTC_ADDR (APB1_ADDR + 0x2800)
#define WWDG_ADDR (APB1_ADDR + 0x2c00)
#define IWDG_ADDR (APB1_ADDR + 0x3000)
#define I2S2_ADDR (APB1_ADDR + 0x3400)
#define SPI2_ADDR (APB1_ADDR + 0x3800)
#define SPI3_ADDR (APB1_ADDR + 0x3c00)
#define I2S3EXT_ADDR (APB1_ADDR + 0x4000)
#define SPDIFRX_ADDR (APB1_ADDR + 0x4000)
#define USART2_ADDR (APB1_ADDR + 0x4400)
#define USART3_ADDR (APB1_ADDR + 0x4800)
#define UART4_ADDR (APB1_ADDR + 0x4c00)
#define UART5_ADDR (APB1_ADDR + 0x5000)
#define I2C1_ADDR (APB1_ADDR + 0x5400)
#define I2C2_ADDR (APB1_ADDR + 0x5800)
#define I2C3_ADDR (APB1_ADDR + 0x5c00)

#define FMPI2C1_ADDR (APB1_ADDR + 0x6000)
#define CAN1_ADDR (APB1_ADDR + 0x6400)
#define CAN2_ADDR (APB1_ADDR + 0x6800)
#define CAN3_ADDR (APB1_ADDR + 0x6c00)

#define PWR_ADDR (APB1_ADDR + 0x7000)
#define DAC_ADDR (APB1_ADDR + 0x7400)
#define UART7_ADDR (APB1_ADDR + 0x7800)
#define UART8_ADDR (APB1_ADDR + 0x7c00)

// APB2 peripherals
#define TIM1_ADDR (APB2_ADDR + 0x0)
#define TIM8_ADDR (APB2_ADDR + 0x400)

#define USART1_ADDR (APB2_ADDR + 0x1000)
#define USART6_ADDR (APB2_ADDR + 0x1400)
#define UART9_ADDR (APB2_ADDR + 0x1800)
#define UART10_ADDR (APB2_ADDR + 0x1c00)

#define ADC1_ADDR (APB2_ADDR + 0x2000)
#define ADC2_ADDR (APB2_ADDR + 0x2100)
#define ADC3_ADDR (APB2_ADDR + 0x2200)
#define ADC_COM_ADDR (APB2_ADDR + 0x2300)

#define SDIO_ADDR (APB2_ADDR + 0x2c00)
#define SPI1_ADDR (APB2_ADDR + 0x3000)
#define SPI4_ADDR (APB2_ADDR + 0x3400)
#define SYSCFG_ADDR (APB2_ADDR + 0x3800)
#define EXTI_ADDR (APB2_ADDR + 0x3c00)
#define TIM9_ADDR (APB2_ADDR + 0x4000)
#define TIM10_ADDR (APB2_ADDR + 0x4400)
#define TIM11_ADDR (APB2_ADDR + 0x4800)

#define SPI5_ADDR (APB2_ADDR + 0x5000)
#define SPI6_ADDR (APB2_ADDR + 0x5400)
#define SAI1_ADDR (APB2_ADDR + 0x5800)
#define SAI1A_ADDR (SAI1_ADDR)
#define SAI1B_ADDR ((SAI1_ADDR) + 0x24)
#define SAI2_ADDR (APB2_ADDR + 0x5c00)
#define SAI2A_ADDR (SAI2_ADDR)
#define SAI2B_ADDR ((SAI2_ADDR) + 0x24)

#define DFSDM1_ADDR (APB2_ADDR + 0x6000)
#define DFSDM2_ADDR (APB2_ADDR + 0x6400)

#define LCD_TFT_ADDR (APB2_ADDR + 0x6800)
#define DSI_HOST_ADDR (APB2_ADDR + 0x6c00)

// AHB1 peripherals
#define GPIOA_ADDR (AHB1_ADDR + 0x0)
#define GPIOB_ADDR (AHB1_ADDR + 0x400)
#define GPIOC_ADDR (AHB1_ADDR + 0x800)
#define GPIOD_ADDR (AHB1_ADDR + 0xc00)
#define GPIOE_ADDR (AHB1_ADDR + 0x1000)
#define GPIOF_ADDR (AHB1_ADDR + 0x1400)
#define GPIOG_ADDR (AHB1_ADDR + 0x1800)
#define GPIOH_ADDR (AHB1_ADDR + 0x1c00)
#define GPIOI_ADDR (AHB1_ADDR + 0x2000)
#define GPIOJ_ADDR (AHB1_ADDR + 0x2400)
#define GPIOK_ADDR (AHB1_ADDR + 0x2800)

#define CRC_ADDR (AHB1_ADDR + 0x3000)

#define RCC_ADDR (AHB1_ADDR + 0x3800)
#define FLASH_ADDR (AHB1_ADDR + 0x3c00)
#define BKPSRAM_ADDR (AHB1_ADDR + 0x4000)

#define DMA1_ADDR (AHB1_ADDR + 0x6000)
#define DMA2_ADDR (AHB1_ADDR + 0x6400)

#define ETHERNET_MAC_ADDR (AHB1_ADDR + 0x8000)

#define DMA2D_ADDR (AHB1_ADDR + 0xb000)

#define USB_OTG_HS_ADDR (AHB1_ADDR + 0x40000)

// AHB2 peripherals
#define USB_OTG_FS_ADDR (AHB2_ADDR + 0x0)
#define DCMI_ADDR (AHB2_ADDR + 0x50000)
#define CRYP_ADDR (AHB2_ADDR + 0x60000)
#define HASH_ADDR (AHB2_ADDR + 0x60400)
#define HASH_CSR_ADDR (HASH_ADDR + 0xf8)
#define HASH_HR1_ADDR (HASH_ADDR + 0x310)
#define RNG_ADDR (AHB2_ADDR + 0x60800)

// AHB3 peripherals
#define FMC_BANK1_ADDR (AHB3_ADDR + 0x0)
#define FMC_BACK2_ADDR (AHB3_ADDR + 0x10000000)
#define FMC_BANK3_ADDR (AHB3_ADDR + 0x20000000)
#define QSPI_BANK_ADDR (AHB3_ADDR + 0x30000000)
#define FMC_CONTROL_ADDR (AHB3_ADDR + 0x40000000)

#define QSPI_CONTROL_ADDR (AHB3_ADDR + 0x40001000)
#define FMC_BANK5_ADDR (AHB3_ADDR + 0x60000000)
#define FMC_BANK6_ADDR (AHB3_ADDR + 0x70000000)

#endif
