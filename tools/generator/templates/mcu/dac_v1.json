{
  "periph": "DAC",
  "path": "stm32/drivers/dac/dac_v1.h",
  "struct": "dac_registers_map",
  "functions": [
    {
      "type": "enum_toggle",
      "fn": "dac_channel",
      "reg": "CR",
      "signature": "{channel}",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 0
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 16
          }
        ]
      }
    },
    {
      "type": "enum_toggle",
      "fn": "dac_channel_output_buffer",
      "reg": "CR",
      "signature": "{channel}",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 1
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 17
          }
        ]
      }
    },
    {
      "type": "enum_toggle",
      "fn": "dac_channel_trigger",
      "reg": "CR",
      "signature": "{channel}",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 2
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 18
          }
        ]
      }
    },
    {
      "type": "enum_set",
      "fn": "dac_channel_set_trigger",
      "reg": "CR",
      "signature": "{channel}, {trigger}",
      "mask": "0x7",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 3
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 19
          }
        ],
        "trigger": [
          {
            "enum": "DAC_CHANNEL_TRIGGER_TIM6_TRGO",
            "value": "0b000",
            "ifdef": "STM32_DAC_TSEL_EXTENDED"
          },
          {
            "enum": "DAC_CHANNEL_TRIGGER_TIM8_TRGO",
            "value": "0b001",
            "ifdef": "STM32_DAC_TSEL_EXTENDED"
          },
          {
            "enum": "DAC_CHANNEL_TRIGGER_TIM7_TRGO",
            "value": "0b010",
            "ifdef": "STM32_DAC_TSEL_EXTENDED"
          },
          {
            "enum": "DAC_CHANNEL_TRIGGER_TIM5_TRGO",
            "value": "0b011"
          },
          {
            "enum": "DAC_CHANNEL_TRIGGER_TIM2_TRGO",
            "value": "0b100",
            "ifdef": "STM32_DAC_TSEL_EXTENDED"
          },
          {
            "enum": "DAC_CHANNEL_TRIGGER_TIM4_TRGO",
            "value": "0b101",
            "ifdef": "STM32_DAC_TSEL_EXTENDED"
          },
          {
            "enum": "DAC_CHANNEL_TRIGGER_EXTERNAL_LINE9",
            "value": "0b110"
          },
          {
            "enum": "DAC_CHANNEL_TRIGGER_SOFTWARE_TRIGGER",
            "value": "0b111"
          }
        ]
      }
    },
    {
      "type": "enum_set",
      "fn": "dac_channel_set_wave",
      "reg": "CR",
      "signature": "{channel}, {wave}",
      "mask": "0x3",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 6
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 22
          }
        ],
        "wave": [
          {
            "enum": "DAC_CHANNEL_WAVE_OFF",
            "value": "0b00"
          },
          {
            "enum": "DAC_CHANNEL_WAVE_NOISE",
            "value": "0b01"
          },
          {
            "enum": "DAC_CHANNEL_WAVE_TRIANGLE",
            "value": "0b10"
          }
        ]
      }
    },
    {
      "type": "enum_set",
      "fn": "dac_set_channel_amplitude",
      "reg": "CR",
      "signature": "{channel}, {amplitude}",
      "mask": "0xf",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 8
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 24
          }
        ],
        "amplitude": [
          {
            "enum": "DAC_CHANNEL_AMPLITUDE1",
            "value": "0b0000"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE3",
            "value": "0b0001"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE7",
            "value": "0b0010"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE15",
            "value": "0b0011"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE31",
            "value": "0b0100"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE63",
            "value": "0b0101"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE127",
            "value": "0b0110"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE255",
            "value": "0b0111"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE511",
            "value": "0b1000"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE1023",
            "value": "0b1001"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE2047",
            "value": "0b1010"
          },
          {
            "enum": "DAC_CHANNEL_AMPLITUDE4095",
            "value": "0b1011"
          }
        ]
      }
    },
    {
      "type": "enum_toggle",
      "fn": "dac_channel_dma",
      "reg": "CR",
      "signature": "{channel}",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 12
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 28
          }
        ]
      }
    },
    {
      "type": "enum_toggle",
      "fn": "dac_channel_dma_underrun_interrupt",
      "reg": "CR",
      "signature": "{channel}",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 13
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 29
          }
        ]
      }
    },
    {
      "type": "enum_toggle",
      "fn": "dac_channel_software_trigger",
      "reg": "SWTRIGR",
      "signature": "{channel}",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 0
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "shift": 1
          }
        ]
      }
    },
    {
      "type": "fn_set_value",
      "fn": "dac_set_channel_12bit_right_aligned_data",
      "signature": "{channel}, {val}",
      "options": [
        "ioreg"
      ],
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "reg": "DHR12R1"
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "reg": "DHR12R2"
          }
        ],
        "val": [
          {
            "value": 0
          },
          {
            "value": "0xfff"
          },
          {
            "value": "0x1000",
            "halt": true
          }
        ]
      }
    },
    {
      "type": "fn_set_value",
      "fn": "dac_set_channel_12bit_left_aligned_data",
      "signature": "{channel}, {val}",
      "shift": 4,
      "options": [
        "ioreg"
      ],
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "reg": "DHR12L1"
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "reg": "DHR12L2"
          }
        ],
        "val": [
          {
            "value": 0
          },
          {
            "value": "0xfff"
          },
          {
            "value": "0x1000",
            "halt": true
          }
        ]
      }
    },
    {
      "type": "fn_set_value",
      "fn": "dac_set_channel_8bit_right_aligned_data",
      "signature": "{channel}, {val}",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "reg": "DHR8R1"
          },
          {
            "enum": "DAC_CHANNEL2",
            "ifdef": "STM32_DAC_CHANNEL2",
            "reg": "DHR8R2"
          }
        ],
        "val": [
          {
            "value": 0
          },
          {
            "value": "0xff"
          },
          {
            "value": "0x100",
            "halt": true
          }
        ]
      }
    },
    {
      "type": "fn_set_value (TODO)",
      "fn": "dac_set_channels_12bit_right_aligned_data",
      "reg": "DHR12RD",
      "signature": "{val}",
      "ifdef": "STM32_DAC_CHANNEL_COMMON",
      "args": {
        "val": []
      }
    },
    {
      "type": "fn_set_value (TODO)",
      "fn": "dac_set_channels_12bit_left_aligned_data",
      "reg": "DHR12RD",
      "signature": "{val}",
      "ifdef": "STM32_DAC_CHANNEL_COMMON",
      "args": {
        "val": []
      }
    },
    {
      "type": "fn_set_value (TODO)",
      "fn": "dac_set_channels_8bit_data",
      "reg": "DHR12RD",
      "signature": "{val}",
      "ifdef": "STM32_DAC_CHANNEL_COMMON",
      "args": {
        "val": []
      }
    },
    {
      "type": "fn_get",
      "fn": "dac_get_channel_output_data",
      "signature": "{channel}",
      "options": [
        "ioreg"
      ],
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "reg": "DOR1"
          },
          {
            "enum": "DAC_CHANNEL2",
            "reg": "DOR2",
            "ifdef": "STM32_DAC_CHANNEL2"
          }
        ]
      }
    },
    {
      "type": "fn_get",
      "fn": "dac_is_dma_underrun_flag_set",
      "signature": "{channel}",
      "reg": "SR",
      "mask": "0x1",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 13
          },
          {
            "enum": "DAC_CHANNEL2",
            "shift": 29,
            "ifdef": "STM32_DAC_CHANNEL2"
          }
        ]
      }
    },
    {
      "type": "fn_call",
      "fn": "dac_dma_underrun_flag_clear",
      "signature": "{channel}",
      "reg": "SR",
      "args": {
        "channel": [
          {
            "enum": "DAC_CHANNEL1",
            "shift": 13
          },
          {
            "enum": "DAC_CHANNEL2",
            "shift": 29,
            "ifdef": "STM32_DAC_CHANNEL2"
          }
        ]
      }
    }
  ]
}

